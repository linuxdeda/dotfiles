/* SPDX-License-Identifier: GPL-3.0-or-later */

/* Custom theme GTK4 - Window Controls Mac-like Behavior */

/* Window Controls base states*/

windowcontrols button {
  min-width: 16px;
  min-height: 16px;
  background-repeat: no-repeat;
  background-size: 16px 16px;
  background-position: center;
  margin: 0px;
  padding: 1px;
}

/* This changes spacing between buttons */
windowcontrols button > image {
  padding: 0 3px;
}

windowcontrols {
  margin-left: 10px;
  margin-right: 10px;
}

windowcontrols button.close,
windowcontrols button.maximize,
windowcontrols button.minimize {
  border-color: transparent;
  background-color: transparent;
  background-image: none;
  box-shadow: none;
  color: transparent;
}

windowcontrols button.close:backdrop,
windowcontrols button.maximize:backdrop,
windowcontrols button.minimize:backdrop {
  opacity: 1;
}

/* Close Button */
windowcontrols button.close {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close.png"),
    url("titlebuttons/button-close@2.png")
  );
}
windowcontrols button.close:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close-backdrop.png"),
    url("titlebuttons/button-close-backdrop@2.png")
  );
}
windowcontrols button.close:hover,
windowcontrols:hover button.close,
windowcontrols:hover button.close:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close-hover-alt.png"),
    url("titlebuttons/button-close-hover-alt@2.png")
  );
}
windowcontrols button.close:backdrop:hover {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close-hover-alt.png"),
    url("titlebuttons/button-close-hover-alt@2.png")
  );
}

/* Minimize Button */
windowcontrols button.minimize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize.png"),
    url("titlebuttons/button-minimize@2.png")
  );
}
windowcontrols button.minimize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize-backdrop.png"),
    url("titlebuttons/button-minimize-backdrop@2.png")
  );
}
windowcontrols button.minimize:hover,
windowcontrols:hover button.minimize,
windowcontrols:hover button.minimize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize-hover.png"),
    url("titlebuttons/button-minimize-hover@2.png")
  );
}
windowcontrols button.minimize:backdrop:hover {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize-hover.png"),
    url("titlebuttons/button-minimize-hover@2.png")
  );
}

/* Maximize Button (unmaximized state) */
windowcontrols button.maximize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize.png"),
    url("titlebuttons/button-maximize@2.png")
  );
}
windowcontrols button.maximize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize-backdrop.png"),
    url("titlebuttons/button-maximize-backdrop@2.png")
  );
}
windowcontrols button.maximize:hover,
windowcontrols:hover button.maximize,
windowcontrols:hover button.maximize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize-hover-alt.png"),
    url("titlebuttons/button-maximize-hover-alt@2.png")
  );
}
windowcontrols button.maximize:backdrop:hover {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize-hover-alt.png"),
    url("titlebuttons/button-maximize-hover-alt@2.png")
  );
}

/* When maximized or fullscreen, the Maximize button becomes Restore */
.fullscreen windowcontrols button.maximize,
.maximized windowcontrols button.maximize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-restore.png"),
    url("titlebuttons/button-restore@2.png")
  );
}
.fullscreen windowcontrols button.maximize:backdrop,
.maximized windowcontrols button.maximize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-restore-backdrop.png"),
    url("titlebuttons/button-restore-backdrop@2.png")
  );
}
.fullscreen windowcontrols button.maximize:hover,
.maximized windowcontrols button.maximize:hover,
.fullscreen windowcontrols:hover button.maximize,
.maximized windowcontrols:hover button.maximize,
.fullscreen windowcontrols:hover button.maximize:backdrop,
.maximized windowcontrols:hover button.maximize:backdrop {
  background-image: -gtk-scaled(
    url("titlebuttons/button-restore-hover-alt.png"),
    url("titlebuttons/button-restore-hover-alt@2.png")
  );
}

/* Mac-like: show all 3 when hovering the group */
windowcontrols:hover button.close {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close-hover-alt.png"),
    url("titlebuttons/button-close-hover-alt@2.png")
  );
}
windowcontrols:hover button.minimize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize-hover.png"),
    url("titlebuttons/button-minimize-hover@2.png")
  );
}
windowcontrols:hover button.maximize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize-hover-alt.png"),
    url("titlebuttons/button-maximize-hover-alt@2.png")
  );
}
.fullscreen windowcontrols:hover button.maximize,
.maximized windowcontrols:hover button.maximize {
  background-image: -gtk-scaled(
    url("titlebuttons/button-restore-hover-alt.png"),
    url("titlebuttons/button-restore-hover-alt@2.png")
  );
}

/* --- ACTIVE STATES --- */
/* Place active rules LAST so they win over container :hover rules with equal specificity. */

/* Close active (including when the container is hovered) */
windowcontrols button.close:active,
windowcontrols:hover button.close:active {
  background-image: -gtk-scaled(
    url("titlebuttons/button-close-active-alt.png"),
    url("titlebuttons/button-close-active-alt@2.png")
  );
}

/* Minimize active */
windowcontrols button.minimize:active,
windowcontrols:hover button.minimize:active {
  background-image: -gtk-scaled(
    url("titlebuttons/button-minimize-active.png"),
    url("titlebuttons/button-minimize-active@2.png")
  );
}

/* Maximize active (unmaximized) */
windowcontrols button.maximize:active,
windowcontrols:hover button.maximize:active {
  background-image: -gtk-scaled(
    url("titlebuttons/button-maximize-active-alt.png"),
    url("titlebuttons/button-maximize-active-alt@2.png")
  );
}

/* Restore active (window maximized/fullscreen) */
.fullscreen windowcontrols button.maximize:active,
.maximized windowcontrols button.maximize:active,
.fullscreen windowcontrols:hover button.maximize:active,
.maximized windowcontrols:hover button.maximize:active {
  background-image: -gtk-scaled(
    url("titlebuttons/button-restore-active-alt.png"),
    url("titlebuttons/button-restore-active-alt@2.png")
  );
}

/* optional: fine tuning for layout */
headerbar .title {
  margin-left: 6px;
  margin-right: 6px;
}
